"use strict";function roundNumber(t,e){var a;if(e=Number(e),1>e)a=Math.round(t).toString();else{var r=t.toString();-1===r.lastIndexOf(".")&&(r+=".");var n=r.lastIndexOf(".")+e,i=Number(r.substring(n,n+1)),l=Number(r.substring(n+1,n+2));if(l>=5){if(9===i&&n>0)for(;n>0&&(9===i||isNaN(i));)"."!==i?(n-=1,i=Number(r.substring(n,n+1))):n-=1;i+=1}if(10===i){r=r.substring(0,r.lastIndexOf("."));var o=Number(r)+1;a=o.toString()+"."}else a=r.substring(0,n)+i.toString()}-1===a.lastIndexOf(".")&&(a+=".");for(var s=a.substring(a.lastIndexOf(".")+1).length,c=0;e-s>c;c++)a+="0";return a}function updateBalance(){var t=$("#total").html().replace("£","")-$("#paid").val().replace("£","");t=roundNumber(t,2),$("#due").html("£"+t)}function updateTotal(){var t=0;$(".price").each(function(){var e=$(this).html().replace("£","");isNaN(e)||(t+=Number(e))}),t=roundNumber(t,2),$("#subtotal").html("£"+t),$("#total").html("£"+t),updateBalance()}function bind(){$(".cost").blur(updatePrice),$(".qty").blur(updatePrice)}function addup(){var t=0;$(".price").each(function(){t+=parseFloat($(this).html().replace("£",""))}),t=roundNumber(t,2),$("#subtotal").html("£"+t),$("#total").html("£"+t),updateBalance()}function readURL(t){if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){$("#image").attr("src",t.target.result)},e.readAsDataURL(t.files[0])}}var updatePrice=function(){var t=$(this).parents(".item-row"),e=t.find(".cost").val().replace("£","")*t.find(".qty").val();t.find(".price").html(isNaN(e)?"N/A":"£"+e),updateTotal()};$(document).ready(function(){$(".deleterow").length<2&&$(".deleterow").hide(),$("#paid").blur(updateBalance),$("#addrow").click(function(){$(".item-row:last").after('<tr class="item-row"><td><div class="del"><textarea class="form-control" id="date">Item</textarea><a href="#" class="deleterow hidden-print"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a></div></td><td><textarea rows="3" class="form-control description">Description</textarea></td><td><textarea class="form-control text-center cost">£0</textarea></td><td><textarea class="form-control text-center qty">1</textarea></td><td class="text-center"><span class="price">£0</span></td></tr>'),$(".deleterow").length>1&&$(".deleterow").show(),bind(),addup()}),bind(),$(document).on("click",".deleterow",function(){var t=$(this).parents(".item-row");t.fadeOut(300,function(){$(this).remove(),updateTotal(),$(".deleterow").length<2&&$(".deleterow").hide()})}),$("#imgInp").change(function(){readURL(this)}),$("#change-logo").click(function(){return $("#image").css({display:"block"}),$("#imgInp").click(),!1}),$("#remove-logo").click(function(){$("#image").css({display:"none"})})});